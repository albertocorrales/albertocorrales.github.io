<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="AWS assuming role + MFA with pulumi (and other applications)" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://albertocorrales.com/posts/AWS-assuming-role-+-MFA-with-pulumi-(and-other-applications)/" /><meta property="og:url" content="https://albertocorrales.com/posts/AWS-assuming-role-+-MFA-with-pulumi-(and-other-applications)/" /><meta property="og:site_name" content="Alberto Corrales Garcia" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-08-16T23:50:23+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="AWS assuming role + MFA with pulumi (and other applications)" /><meta name="twitter:site" content="@albertocorralex" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-08-16T23:50:23+02:00","datePublished":"2021-08-16T23:50:23+02:00","description":"Introduction","headline":"AWS assuming role + MFA with pulumi (and other applications)","mainEntityOfPage":{"@type":"WebPage","@id":"https://albertocorrales.com/posts/AWS-assuming-role-+-MFA-with-pulumi-(and-other-applications)/"},"url":"https://albertocorrales.com/posts/AWS-assuming-role-+-MFA-with-pulumi-(and-other-applications)/"}</script><title>AWS assuming role + MFA with pulumi (and other applications) | Alberto Corrales Garcia</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Alberto Corrales Garcia"><meta name="application-name" content="Alberto Corrales Garcia"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://albertocorrales.com/assets/img/profile_pic.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Alberto Corrales Garcia</a></div><div class="site-subtitle font-italic">Software Development, Architecture, Cloud and Technology</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/albertocorrales" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/albertocorralex" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['albertocorralesgarcia','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>AWS assuming role + MFA with pulumi (and other applications)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>AWS assuming role + MFA with pulumi (and other applications)</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1629150623" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Aug 16, 2021 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/albertocorralex">Alberto Corrales Garcia</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="708 words"> <em>3 min</em> read</span></div></div></div><div class="post-content"><h2 id="introduction"><span class="mr-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In AWS, managing your IAM in a centralized account is a good practice, so then you can assume a role to access to other accounts without need of duplicating users. You can find more info about this approach in <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_aws-accounts.html">this article</a>.</p><p>In addition, for security reasons, it is highly recommended to enable MFA (Multi-factor Authentication), so you need a device to generate a temporary code to get access. In the image below it is showed how assume role with MFA works, but you also have an article about MFA in <a href="https://aws.amazon.com/blogs/security/how-do-i-protect-cross-account-access-using-mfa-2/">this link</a>.</p><p><a href="https://1.bp.blogspot.com/-Lj2Addm2sJ0/YRrQJn5sY6I/AAAAAAAAGk4/DV4-aqjwHtIx6qmAl7YFjOV7NMZRdWXMACLcBGAsYHQ/s997/MFAAPI4.png"><img data-src="https://1.bp.blogspot.com/-Lj2Addm2sJ0/YRrQJn5sY6I/AAAAAAAAGk4/DV4-aqjwHtIx6qmAl7YFjOV7NMZRdWXMACLcBGAsYHQ/w640-h360/MFAAPI4.png" alt="" data-proofer-ignore></a></p><p>This approach is really useful and most of the configuration can be automated with pulumi (or other providers like terraform or CloudFormation). And once it is configured, you can switch your role and get access to other accounts with a few clicks.</p><p>However, when it comes to external software such us pulumi, getting access assuming a role and using MFA might not be too straightforward. In this article we will see how this can be configured and how we can easily refresh our credentials with a PowerShell script.</p><h2 id="getting-access-with-assume-role--mfa-for-pulumi"><span class="mr-2">Getting access with assume role + MFA for pulumi</span><a href="#getting-access-with-assume-role--mfa-for-pulumi" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In this section, we will explain how you can setup manually your credentials, so pulumi can get access to your account by assuming a role + using MFA.</p><h3 id="getting-a-token-by-using-mfa"><span class="mr-2">Getting a token by using MFA</span><a href="#getting-a-token-by-using-mfa" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>First, you need to request temporary MFA credentials, using your AWS Access Key and Secret Key for your user in the account where you have your IAM user. In order to so, you can run this command, which will issue your temporary credentials valid for 8 hours (max 36 hours):</p><p>aws sts get-session-token –duration-seconds 28800 –serial-number arn-of-the-mfa-device –token-code code-from-token</p><p>Where:</p><ul><li><em><strong>arn-of-the-mfa-device:</strong></em> you can find it in AWS Ops account, if you click on your user (top bar), then “My security credentials”.<li><em><strong>from-token</strong></em>: numeric code that you can get this code with the app you are using for MFA.</ul><h3 id="setup-your-aws-profile-credentials"><span class="mr-2">Setup your AWS profile credentials</span><a href="#setup-your-aws-profile-credentials" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Then, you need to  add two profiles. One to setup your temporary credentials and another to assume the role for the account that you want to get access.</p><p>In order to setup to setup these profiles, you have to go to C:\Users\YourUser\.aws\credentials.</p><p>Then, you need to add these profiles:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>[dev]
role_arn = arn:aws:iam::#account_number#:role/#YourRole#
source_profile = mfa
[mfa]
aws_access_key_id = #aws_access_key_id_from_get-session-token_command#
aws_secret_access_key = #aws_secret_access_key_from_get-session-token_command#
aws_session_token = #aws_session_token_from_get-session-token_command#
</pre></table></code></div></div><p>So basically, when you use [dev] profile, it will assume the role you configured using the credentials that you setup in [mfa].</p><h3 id="configure-pulumi-or-other-applications"><span class="mr-2">Configure pulumi or other applications</span><a href="#configure-pulumi-or-other-applications" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>In order to use your profile in pulumi, in the stack folder, you need to run this command:</p><p>pulumi config set aws:profile dev</p><p>For console commands or other local tools, setup your environment variable properly with PowerShell or CMD bash (*):</p><p>setx AWS_PROFILE dev</p><p>(*) To apply the change when you update an environment variable, you need to reset your terminal.</p><h2 id="automating-credentials-refresh-with-powershell"><span class="mr-2">Automating credentials refresh with PowerShell</span><a href="#automating-credentials-refresh-with-powershell" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>This process is quite straightforward, but it can be a little annoying if you have to perform those manual steps each time you want to refresh your credentials.</p><p>In order to make this process really easy, I’ve created a PowerShell script, which will request your MFA code and it will refresh your profile with those credentials.</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="nv">$MfaDeviceArn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#YOUR_MFA_DEVICE_ARN#"</span><span class="w">
</span><span class="nv">$DurationInSeconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">28800</span><span class="w">
</span><span class="nv">$OpsProfileName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ops"</span><span class="w">
</span><span class="nv">$MfaProfileName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"mfadev"</span><span class="w">


</span><span class="nv">$MfaCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Read-Host</span><span class="w"> </span><span class="nt">-Prompt</span><span class="w"> </span><span class="s1">'Please, input your MFA code'</span><span class="w">


</span><span class="nv">$TempCredentials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aws</span><span class="w"> </span><span class="nx">sts</span><span class="w"> </span><span class="nx">get-session-token</span><span class="w"> </span><span class="nt">--duration-seconds</span><span class="w"> </span><span class="nv">$DurationInSeconds</span><span class="w"> </span><span class="nt">--serial-number</span><span class="w"> </span><span class="nv">$MfaDeviceArn</span><span class="w"> </span><span class="nt">--token-code</span><span class="w"> </span><span class="nv">$MfaCode</span><span class="w"> </span><span class="nt">--profile</span><span class="w"> </span><span class="nv">$OpsProfileName</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertFrom-Json</span><span class="w">


</span><span class="n">Write-Output</span><span class="w"> </span><span class="s2">"Updating your profile '</span><span class="nv">$MfaProfileName</span><span class="s2">' with your new temporary credentials..."</span><span class="w">


</span><span class="nv">$AccessKeyId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nv">$TempCredentials</span><span class="p">)</span><span class="o">.</span><span class="nf">Credentials</span><span class="o">.</span><span class="nf">AccessKeyId</span><span class="w">
</span><span class="nv">$SecretAccessKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nv">$TempCredentials</span><span class="p">)</span><span class="o">.</span><span class="nf">Credentials</span><span class="o">.</span><span class="nf">SecretAccessKey</span><span class="w">
</span><span class="nv">$SessionToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nv">$TempCredentials</span><span class="p">)</span><span class="o">.</span><span class="nf">Credentials</span><span class="o">.</span><span class="nf">SessionToken</span><span class="w">


</span><span class="n">aws</span><span class="w"> </span><span class="nx">configure</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="nx">aws_access_key_id</span><span class="w"> </span><span class="nv">$AccessKeyId</span><span class="w"> </span><span class="nt">--profile</span><span class="w"> </span><span class="nv">$MfaProfileName</span><span class="w">
</span><span class="n">aws</span><span class="w"> </span><span class="nx">configure</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="nx">aws_secret_access_key</span><span class="w"> </span><span class="nv">$SecretAccessKey</span><span class="w"> </span><span class="nt">--profile</span><span class="w"> </span><span class="nv">$MfaProfileName</span><span class="w">
</span><span class="n">aws</span><span class="w"> </span><span class="nx">configure</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="nx">aws_session_token</span><span class="w"> </span><span class="nv">$SessionToken</span><span class="w"> </span><span class="nt">--profile</span><span class="w"> </span><span class="nv">$MfaProfileName</span><span class="w">


</span><span class="n">Write-Output</span><span class="w"> </span><span class="s2">"Profile '</span><span class="nv">$MfaProfileName</span><span class="s2">' updated successfully!"</span><span class="w">
</span><span class="n">Read-Host</span><span class="w">  </span><span class="nt">-Prompt</span><span class="w"> </span><span class="s2">"Press any key to continue or CTRL+C to quit"</span><span class="w">
</span></pre></table></code></div></div><p>So now, when we execute the script, I will request our MFA code and it will setup those credentials in our profile automatically.</p><p><a href="https://1.bp.blogspot.com/-PjqtVahQcmo/YRra9lMd_MI/AAAAAAAAGlI/mwnlmSqNxb8ta7Wf-6zLZTdFaVli3H0ZwCLcBGAsYHQ/s906/mfa.PNG"><img data-src="https://1.bp.blogspot.com/-PjqtVahQcmo/YRra9lMd_MI/AAAAAAAAGlI/mwnlmSqNxb8ta7Wf-6zLZTdFaVli3H0ZwCLcBGAsYHQ/w533-h95/mfa.PNG" alt="" data-proofer-ignore></a></p><p>You can find the source code in this Git gist: <a href="https://gist.github.com/albertocorrales/f05c1f84554d20e3d32222964dcfaef0">https://gist.github.com/albertocorrales/f05c1f84554d20e3d32222964dcfaef0</a> .</p><p>I hope you found useful this article</p></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >aws</a> <a href="/tags/security/" class="post-tag no-text-decoration" >security</a> <a href="/tags/iam/" class="post-tag no-text-decoration" >iam</a> <a href="/tags/mfa/" class="post-tag no-text-decoration" >mfa</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AWS+assuming+role+%2B+MFA+with+pulumi+%28and+other+applications%29+-+Alberto+Corrales+Garcia&url=https%3A%2F%2Falbertocorrales.com%2Fposts%2FAWS-assuming-role-%2B-MFA-with-pulumi-%28and-other-applications%29%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AWS+assuming+role+%2B+MFA+with+pulumi+%28and+other+applications%29+-+Alberto+Corrales+Garcia&u=https%3A%2F%2Falbertocorrales.com%2Fposts%2FAWS-assuming-role-%2B-MFA-with-pulumi-%28and-other-applications%29%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Falbertocorrales.com%2Fposts%2FAWS-assuming-role-%2B-MFA-with-pulumi-%28and-other-applications%29%2F&text=AWS+assuming+role+%2B+MFA+with+pulumi+%28and+other+applications%29+-+Alberto+Corrales+Garcia" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Getting-starting-with-MCPs/">Getting started with MCPs, add super powers to your AI assistant</a><li><a href="/posts/Build-your-own-MCP/">Level Up Your AI Skills, Build a Custom MCP from Scratch</a><li><a href="/posts/Copier-template-projects/">Build Microservices at speed light with Copier</a><li><a href="/posts/CI-CD-pipelines-as-code-with-Nuke-build/">CI/CD pipelines-as-code with Nuke</a><li><a href="/posts/Working-with-event-sourcing-and-web-sockets/">Working with Event Sourcing, CQRS and Web Sockets on AWS</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/ai-assistant/">AI assistant</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/architecture/">Architecture</a> <a class="post-tag" href="/tags/claude/">Claude</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/cqrs/">CQRS</a> <a class="post-tag" href="/tags/event-sourcing/">event sourcing</a> <a class="post-tag" href="/tags/eventstoredb/">EventStoreDB</a> <a class="post-tag" href="/tags/llm/">LLM</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Dropping-the-cost-of-dynamodb/"><div class="card-body"> <em class="small" data-ts="1661680800" data-df="ll" > Aug 28, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Dropping the cost of DynamoDB</h3><div class="text-muted small"><p> Introduction DynamoDB is the most popular NoSql database on AWS. It allows you to easily build high performant applications taking care of the good practices, such as: encryption, access control, ...</p></div></div></a></div><div class="card"> <a href="/posts/Scaling-up-down-event-store-without-downtime/"><div class="card-body"> <em class="small" data-ts="1665741600" data-df="ll" > Oct 14, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Scaling up/down EventStoreDB without downtime</h3><div class="text-muted small"><p> Introduction EventStoreDB (ESDB) is a log stream database oriented to architectures based on event-sourcing. The data in EventStoreDB is stored into streams, and each stream contains a log of even...</p></div></div></a></div><div class="card"> <a href="/posts/Working-with-event-sourcing-and-web-sockets/"><div class="card-body"> <em class="small" data-ts="1674036000" data-df="ll" > Jan 18, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Working with Event Sourcing, CQRS and Web Sockets on AWS</h3><div class="text-muted small"><p> Introduction The WebSocket API is an advanced technology that makes it possible to open a two-way interactive communication session between the user’s browser and a server. With this API, you can ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Performance-improvement-for-EventSourcingCQRS-with-Snapshots/" class="btn btn-outline-primary" prompt="Older"><p>Performance improvement for EventSourcing/CQRS with Snapshots</p></a> <a href="/posts/Circuit-Breakers-to-handle-failures-in-serverless-applications/" class="btn btn-outline-primary" prompt="Newer"><p>Circuit Breakers to handle failures in serverless applications</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/albertocorralex">Alberto Corrales Garcia</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/ai-assistant/">AI assistant</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/architecture/">Architecture</a> <a class="post-tag" href="/tags/claude/">Claude</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/cqrs/">CQRS</a> <a class="post-tag" href="/tags/event-sourcing/">event sourcing</a> <a class="post-tag" href="/tags/eventstoredb/">EventStoreDB</a> <a class="post-tag" href="/tags/llm/">LLM</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
