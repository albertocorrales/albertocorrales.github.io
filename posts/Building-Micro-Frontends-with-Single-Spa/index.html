<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Building Micro-Frontends with Single-Spa" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://albertocorrales.com/posts/Building-Micro-Frontends-with-Single-Spa/" /><meta property="og:url" content="https://albertocorrales.com/posts/Building-Micro-Frontends-with-Single-Spa/" /><meta property="og:site_name" content="Alberto Corrales Garcia" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-04T15:58:30+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Building Micro-Frontends with Single-Spa" /><meta name="twitter:site" content="@albertocorralex" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-04-04T15:58:30+02:00","datePublished":"2021-04-04T15:58:30+02:00","description":"Introduction","headline":"Building Micro-Frontends with Single-Spa","mainEntityOfPage":{"@type":"WebPage","@id":"https://albertocorrales.com/posts/Building-Micro-Frontends-with-Single-Spa/"},"url":"https://albertocorrales.com/posts/Building-Micro-Frontends-with-Single-Spa/"}</script><title>Building Micro-Frontends with Single-Spa | Alberto Corrales Garcia</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Alberto Corrales Garcia"><meta name="application-name" content="Alberto Corrales Garcia"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://albertocorrales.com/assets/img/profile_pic.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Alberto Corrales Garcia</a></div><div class="site-subtitle font-italic">Software Development, Architecture, Cloud and Technology</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/albertocorrales" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/albertocorralex" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['albertocorralesgarcia','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Building Micro-Frontends with Single-Spa</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Building Micro-Frontends with Single-Spa</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1617544710" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 4, 2021 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/albertocorralex">Alberto Corrales Garcia</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1241 words"> <em>6 min</em> read</span></div></div></div><div class="post-content"><h2 id="introduction"><span class="mr-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Micro-services architecture is becoming trendy since it is a suitable option many projects, specially those that are complex and we want to be able spilt our business logic into different services that can be built and deliver independently. In spite of the fact that micro-services architectures are more complex, they increase the resilience of your system and increase the time-to-market delivery, which can be crucial for many companies.</p><p>But it is not all about services and backend. With the introduction of single page applications (SPAs), we can build fully-functional user interfaces that can work independently in the browser. And here we should ask ourselves the same questions as for backend applications: Is my SPA becoming a huge monolith? Would I like to deliver functional modules independently? If you using micro-services, is there a relation between my services and your UI? Do we want to have functional teams that can deliver new features (frontend+backend) independently? If your answer to most of those questions is ‘yes’, you might need to consider micro-frontend architectures.</p><h2 id="what-are-micro-frontends"><span class="mr-2">What are Micro-Frontends?</span><a href="#what-are-micro-frontends" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Here we have one of my favourite posts about micro-frontends: <a href="https://martinfowler.com/articles/micro-frontends.html">https://martinfowler.com/articles/micro-frontends.html</a>. In particular, this image summarizes quite well the importance of micro-frontends:</p><p><a href="https://1.bp.blogspot.com/-8NxeDb9eIlM/YDIwqLfFxwI/AAAAAAAAGcE/-9ejhlORY6M3xo8cOyJtfrYUVWlGERJUACLcBGAsYHQ/s1041/deployment.png"><img data-src="https://1.bp.blogspot.com/-8NxeDb9eIlM/YDIwqLfFxwI/AAAAAAAAGcE/-9ejhlORY6M3xo8cOyJtfrYUVWlGERJUACLcBGAsYHQ/w640-h214/deployment.png" alt="" data-proofer-ignore></a></p><p>So, when it comes to micro-frontend good practices and principles, there is a list of points that I consider important in the design:</p><ol><li>Each micro-frontend should be independently developed and delivered.<li>Micro-frontends should load efficiently by using lazy-loading.<li>We should be able to reuse common stuff, like styles, auth, frameworks in an efficient way.<li>Communication between micro-frontends should be allowed in a decoupled and async way, and it shouldn’t be too chatty.<li>We should be allowed to use micro-frontends with different technologies.</ol><h2 id="single-spa"><span class="mr-2">Single-Spa</span><a href="#single-spa" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Technology-wise, there are some popular options available (here there is <a href="https://itnext.io/11-micro-frontends-frameworks-you-should-know-b66913b9cd20">an article</a> with some of the most trendy ones).</p><p>I’ve been comparing some of the frameworks of that list, and Single-Spa (<a href="https://single-spa.js.org/">https://single-spa.js.org/</a>) seems the most suitable candidate for many reasons:</p><ul><li>It allows you to build and deliver your micro-frontends independently. In fact, they recommend having separated repositories and pipelines for each of your micro-frontends.<li>It supports lazy loading. So your micro-frontends will be loading as you need them, instead of having a massive loading time at the beginning.<li>It allows reusability of code and styles. In order to support this, you have multiple alternatives, like utility-modules or parcels.<li>Data loading for shared modules is efficient. To do this, the preference is <a href="https://github.com/WICG/import-maps">Import-maps</a>, but <a href="https://dev.to/marais/webpack-5-and-module-federation-4j1i">Module federation</a> is also also supported.<li>Communication between micro-frontends is supported. Here the preference is <a href="https://single-spa.js.org/docs/recommended-setup#cross-microfrontend-imports">cross microfrontend imports</a>, but other alternatives like custom events or redux are also supported.<li>Single-Spa doesn’t depend on any frameworks. Under the hood, it works with javascript and webpack. In addition, it offers <a href="https://single-spa.js.org/docs/ecosystem#help-for-frameworks">helper libraries</a> for the most trendy frameworks.<li>Single-Spa is <a href="https://github.com/single-spa/single-spa">open source</a> and the community support is strong. The documentation and the number of examples is quite good.<li>You can mount micro-frontends dynamically with <a href="https://github.com/joeldenning/import-map-overrides">import-map-overrides</a>. This feature is just awesome. It allows you to inject one or several micro-frontends, so you don’t have to run everything locally.<li>There is a CLI (<a href="https://single-spa.js.org/docs/create-single-spa">create-single-spa</a>), which makes really easy to create new micro-frontends with the initial scaffolding.</ul><p>And here some caveats:</p><ul><li>Micro-frontends are more complex than monolith SPAs. This is not only for Single-Spa, but for every micro-frontend architecture, since distributed systems are always more complex.<li>If you are used to working with one SPA and CRA, it can be challenging at the beginning and you might need to learn some concepts, specially about Webpack, since Single-Spa doesn’t support CRA.</ul><h2 id="single-spa-with-create-react-app"><span class="mr-2">Single-Spa with Create-React-App</span><a href="#single-spa-with-create-react-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In the previous caveats list I mentioned “Single-Spa doesn’t support CRA”. Well, that is not true. They prefer using Webpack directly, but CRA under the hood uses Webpack. So, with the proper configuration, CRA can work with Single-Spa.</p><p>On the internet, you can find some articles or snippets to give you a gist of how this needs to be configured. However, I haven’t found any full examples. So I built my own example application, that you can find on my GitHub: <a href="https://github.com/albertocorrales/single-spa-cra-example">https://github.com/albertocorrales/single-spa-cra-example</a>.</p><p>In order to build a micro-frontend with Single-Spa and CRA you need to do the following steps:</p><h3 id="1-create-a-new-micro-frontend-with-create-react-app"><span class="mr-2">1) Create a new micro-frontend with create-react-app</span><a href="#1-create-a-new-micro-frontend-with-create-react-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>You can just create a new app with the following command</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>  npx create-react-app app1 --template typescript
</pre></table></code></div></div><p>I normally work with typescript <a href="https://www.albertocorrales.com/2019/07/benefits-of-using-typescript-in-your.html">for many reasons</a>, but this example will also work with javascript.</p><h3 id="2-install-and-configure-react-app-rewired"><span class="mr-2">2) Install and configure react-app-rewired</span><a href="#2-install-and-configure-react-app-rewired" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>In order to be able to change CRA pre-configuration, you need to install a package like <a href="https://github.com/timarney/react-app-rewired">react-app-rewired</a>.</p><p>Execute this command:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm install react-app-rewired --save-dev
</pre></table></code></div></div><h3 id="3-configurereact-app-rewired"><span class="mr-2">3) Configure react-app-rewired</span><a href="#3-configurereact-app-rewired" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>First of all, edit package.json to add rewired script (optionally, you can keep cra scripts):</p><p>Then, in the root of your app, add a new file “config-overrides.js” with the following content:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">webpack</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span> <span class="nx">env</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">entry</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">./src/index-single-spa.tsx</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="p">{</span>
      <span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">output</span><span class="p">,</span>
      <span class="na">filename</span><span class="p">:</span> <span class="dl">"</span><span class="s2">@company/app1.js</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">libraryTarget</span><span class="p">:</span> <span class="dl">"</span><span class="s2">system</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">};</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">plugins</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">plugin</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nx">plugin</span><span class="p">.</span><span class="kd">constructor</span><span class="p">.</span><span class="nx">name</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">HtmlWebpackPlugin</span><span class="dl">"</span> <span class="o">&amp;&amp;</span>
        <span class="nx">plugin</span><span class="p">.</span><span class="kd">constructor</span><span class="p">.</span><span class="nx">name</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">MiniCssExtractPlugin</span><span class="dl">"</span>
    <span class="p">);</span>
    <span class="k">delete</span> <span class="nx">config</span><span class="p">.</span><span class="nx">optimization</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">devServer</span><span class="p">(</span><span class="nx">configFunction</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">proxy</span><span class="p">,</span> <span class="nx">allowedHost</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">configFunction</span><span class="p">(</span><span class="nx">proxy</span><span class="p">,</span> <span class="nx">allowedHost</span><span class="p">);</span>
      <span class="nx">config</span><span class="p">.</span><span class="nx">disableHostCheck</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="nx">config</span><span class="p">.</span><span class="nx">headers</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">headers</span> <span class="o">||</span> <span class="p">{};</span>
      <span class="nx">config</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">},</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="4-add-single-spa-support"><span class="mr-2">4) Add single spa support</span><a href="#4-add-single-spa-support" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Install package “single-spa-react” with this command:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>  npm i -D single-spa-react
</pre></table></code></div></div><p>Then, create index-single-spa.tsx, which will be your entry point for your micro-frontend:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ReactDOM</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-dom</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./App</span><span class="dl">"</span><span class="p">;</span>
<span class="c1">// Note that SingleSpaContext is a react@16.3 (if available) context that provides the singleSpa props</span>
<span class="k">import</span> <span class="nx">singleSpaReact</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">single-spa-react</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">reactLifecycles</span> <span class="o">=</span> <span class="nx">singleSpaReact</span><span class="p">({</span>
  <span class="nx">React</span><span class="p">,</span>
  <span class="nx">ReactDOM</span><span class="p">,</span>
  <span class="na">rootComponent</span><span class="p">:</span> <span class="nx">App</span><span class="p">,</span>
  <span class="nx">errorBoundary</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">info</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// https://reactjs.org/docs/error-boundaries.html</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">This</span> <span class="nx">renders</span> <span class="nx">when</span> <span class="nx">a</span> <span class="nx">catastrophic</span> <span class="nx">error</span> <span class="nx">occurs</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err">;
</span>  <span class="p">},</span>
<span class="p">});</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">bootstrap</span> <span class="o">=</span> <span class="nx">reactLifecycles</span><span class="p">.</span><span class="nx">bootstrap</span><span class="p">;</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">mount</span> <span class="o">=</span> <span class="nx">reactLifecycles</span><span class="p">.</span><span class="nx">mount</span><span class="p">;</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">unmount</span> <span class="o">=</span> <span class="nx">reactLifecycles</span><span class="p">.</span><span class="nx">unmount</span><span class="p">;</span>
</pre></table></code></div></div><p>At this point, your CRA app is ready to run as single-spa micro-frontend. If you run the command “npm start”, you should be able to see your javascript file on <a href="http://localhost:3000/@company/app1.js">http://localhost:3000/@company/app1.js</a>.</p><h3 id="5-add-your-micro-frontend-to-root-application"><span class="mr-2">5) Add your micro-frontend to root application</span><a href="#5-add-your-micro-frontend-to-root-application" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now it is time to create a root-config app with Single-Spa and load our micro-frontend. To do so, create a new root-config app with command:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>  create-single-spa --moduleType root-config
</pre></table></code></div></div><p>Finally, in your file index.ejs, replace example “@single-spa/welcome” with your new micro-frontend “@compan/app1”.  Now, if you run “npm startW for the root application, you should be able to see your micro-service working on <a href="http://localhost:9000">http://localhost:9000/</a></p><h2 id="conclusions"><span class="mr-2">Conclusions</span><a href="#conclusions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In this post, we have seen some principles and good design practices about micro-frontends. Technology-wise, Single-Spa is a strong candidate, which offers a powerful framework, which tries to simplify building micro-frontends.</p><p>In spite of the fact that Single-Spa includes a CLI what helps to create new micro-frontends, you could still using Create-React-App to run your CRA applications as Single-Spa micro-frontends, which can be a good starting point if are already working with CRA and you don’t want to move to Webpack. However, in the long term, I would suggest to getting familiar with Webpack, since sooner or later you will need some configuration and not using CRA you will have more control over it.</p><p><strong>Update 04/04/2021</strong></p><p>Recently I’ve found <a href="https://github.com/hasanayan/craco-plugin-single-spa-application">this plugin</a> based on <a href="https://github.com/gsoft-inc/craco">CRACO</a> that also allows you to work with Singe-Spa and CRA. Here you have an example of this plugin configured with Single-Spa <a href="https://github.com/albertocorrales/single-spa-cra-example/tree/main/app2">https://github.com/albertocorrales/single-spa-cra-example/tree/main/app2</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/architecture/'>architecture</a>, <a href='/categories/frontend/'>frontend</a>, <a href='/categories/micro-frontends/'>micro-frontends</a>, <a href='/categories/react/'>react</a>, <a href='/categories/single-spa/'>single-spa</a>, <a href='/categories/spa/'>spa</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Building+Micro-Frontends+with+Single-Spa+-+Alberto+Corrales+Garcia&url=https%3A%2F%2Falbertocorrales.com%2Fposts%2FBuilding-Micro-Frontends-with-Single-Spa%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Building+Micro-Frontends+with+Single-Spa+-+Alberto+Corrales+Garcia&u=https%3A%2F%2Falbertocorrales.com%2Fposts%2FBuilding-Micro-Frontends-with-Single-Spa%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Falbertocorrales.com%2Fposts%2FBuilding-Micro-Frontends-with-Single-Spa%2F&text=Building+Micro-Frontends+with+Single-Spa+-+Alberto+Corrales+Garcia" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Getting-starting-with-MCPs/">Getting started with MCPs, add super powers to your AI assistant</a><li><a href="/posts/Build-your-own-MCP/">Level Up Your AI Skills, Build a Custom MCP from Scratch</a><li><a href="/posts/Copier-template-projects/">Build Microservices at speed light with Copier</a><li><a href="/posts/CI-CD-pipelines-as-code-with-Nuke-build/">CI/CD pipelines-as-code with Nuke</a><li><a href="/posts/Working-with-event-sourcing-and-web-sockets/">Working with Event Sourcing, CQRS and Web Sockets on AWS</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/ai-assistant/">AI assistant</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/architecture/">Architecture</a> <a class="post-tag" href="/tags/claude/">Claude</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/cqrs/">CQRS</a> <a class="post-tag" href="/tags/event-sourcing/">event sourcing</a> <a class="post-tag" href="/tags/eventstoredb/">EventStoreDB</a> <a class="post-tag" href="/tags/llm/">LLM</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Benefits-of-using-TypeScript-in-your-project/"><div class="card-body"> <em class="small" data-ts="1562051428" data-df="ll" > Jul 2, 2019 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Benefits of using TypeScript in your project</h3><div class="text-muted small"><p> Introduction Since I started my career in Computer Sciences, I have had the chance to work with a huge variety of frontend and backend technologies. During that period, on the client side, I wit...</p></div></div></a></div><div class="card"> <a href="/posts/React-Rally-2019/"><div class="card-body"> <em class="small" data-ts="1566800486" data-df="ll" > Aug 26, 2019 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>React Rally 2019</h3><div class="text-muted small"><p> If you work with React, you might be interested in watching #ReactRally 2019 conference: - Day 1: https://youtube.com/watch?v=dvtfNpt75aA - Day 2: https://youtube.com/watch?v=8dKljTMDGu0 Here yo...</p></div></div></a></div><div class="card"> <a href="/posts/Making-DDD-and-CQRS-Microservices-easy-with-dotnet-templates/"><div class="card-body"> <em class="small" data-ts="1596479534" data-df="ll" > Aug 3, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Making DDD and CQRS Microservices easy with dotnet templates</h3><div class="text-muted small"><p> Introduction If you are working with Microservices, you might have noticed that you are repeating over and over the scaffolding for your new microservices. In order to make easier the creation o...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Managing-snapshots-for-Amazon-ElasticSearch-with-Dotnet-Core-Lambdas/" class="btn btn-outline-primary" prompt="Older"><p>Managing snapshots for Amazon ElasticSearch with Dotnet Core Lambdas</p></a> <a href="/posts/Performance-improvement-for-EventSourcingCQRS-with-Snapshots/" class="btn btn-outline-primary" prompt="Newer"><p>Performance improvement for EventSourcing/CQRS with Snapshots</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/albertocorralex">Alberto Corrales Garcia</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/ai-assistant/">AI assistant</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/architecture/">Architecture</a> <a class="post-tag" href="/tags/claude/">Claude</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/cqrs/">CQRS</a> <a class="post-tag" href="/tags/event-sourcing/">event sourcing</a> <a class="post-tag" href="/tags/eventstoredb/">EventStoreDB</a> <a class="post-tag" href="/tags/llm/">LLM</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
